# cloverparser

[![run-tests](https://github.com/willpower232/cloverparser/actions/workflows/run-tests.yml/badge.svg)](https://github.com/willpower232/cloverparser/actions/workflows/run-tests.yml)
![Coverage](https://laravel-coverage.s3.eu-west-2.amazonaws.com/willpower232/cloverparser/main.svg)

This is a parser for one or more clover coverage files, as generated by [phpunit/phpunit](https://phpunit.de/), with the aim of producing a percentage for code coverage.

This is intended to be the basis of parsing some clover files for use in other ways such as [willpower232/cloverparser-laravel](https://github.com/willpower232/cloverparser-laravel) which creates an SVG from the coverage percentage and stores it using Laravels framework.

---

A former casual user of [codecov](https://codecov.io) and interested in controlling my own data, I decided to see how complicated it would be to operate a similar setup myself after [their uploader script was compromised](https://www.theregister.com/2021/04/19/codecov_warns_of_stolen_credentials/).

This is the first part of this project, discovering how to get the coverage values out of a clover file.

---

## Installation

```
composer require willpower232/cloverparser
```

## Usage

```php
use WillPower232\CloverParser\CloverParser;

$parser = new CloverParser;

$parser->addFile($pathToCloverFile);

$percentage = $parser->getPercentage();
```
